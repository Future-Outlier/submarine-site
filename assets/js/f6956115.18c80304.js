"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3822],{3905:function(e,t,n){n.d(t,{Zo:function(){return o},kt:function(){return d}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},p=Object.keys(e);for(r=0;r<p.length;r++)n=p[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(r=0;r<p.length;r++)n=p[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var m=r.createContext({}),s=function(e){var t=r.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},o=function(e){var t=s(e.components);return r.createElement(m.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,p=e.originalType,m=e.parentName,o=l(e,["components","mdxType","originalType","parentName"]),c=s(n),d=a,h=c["".concat(m,".").concat(d)]||c[d]||u[d]||p;return n?r.createElement(h,i(i({ref:t},o),{},{components:n})):r.createElement(h,i({ref:t},o))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var p=n.length,i=new Array(p);i[0]=c;var l={};for(var m in t)hasOwnProperty.call(t,m)&&(l[m]=t[m]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<p;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},3272:function(e,t,n){n.r(t),n.d(t,{assets:function(){return o},contentTitle:function(){return m},default:function(){return d},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return u}});var r=n(7462),a=n(3366),p=(n(7294),n(3905)),i=["components"],l={title:"Experiment Template REST API"},m=void 0,s={unversionedId:"api/experiment-template",id:"version-0.6.0/api/experiment-template",title:"Experiment Template REST API",description:"\x3c!--",source:"@site/versioned_docs/version-0.6.0/api/experiment-template.md",sourceDirName:"api",slug:"/api/experiment-template",permalink:"/docs/0.6.0/api/experiment-template",editUrl:"https://github.com/apache/submarine/edit/master/website/versioned_docs/version-0.6.0/api/experiment-template.md",tags:[],version:"0.6.0",frontMatter:{title:"Experiment Template REST API"},sidebar:"api",previous:{title:"Experiment REST API",permalink:"/docs/0.6.0/api/experiment"},next:{title:"Notebook REST API",permalink:"/docs/0.6.0/api/notebook"}},o={},u=[{value:"Create experiment template",id:"create-experiment-template",level:2},{value:"List experiment template",id:"list-experiment-template",level:3},{value:"Get experiment template",id:"get-experiment-template",level:3},{value:"Patch template",id:"patch-template",level:3},{value:"Delete template",id:"delete-template",level:3},{value:"Use template to create a experiment",id:"use-template-to-create-a-experiment",level:3}],c={toc:u};function d(e){var t=e.components,n=(0,a.Z)(e,i);return(0,p.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},"Note: The Experiment API is in the alpha stage which is subjected to incompatible changes in\nfuture releases.")),(0,p.kt)("p",null,'Developers can register a parameterized experiment as an experiment template,\nFor example, if the developer wants to change the following "--learning_rate=0.1" to parameters.'),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-json"},'"experimentSpec": {\n  "meta": {\n    "cmd": "python /var/tf_mnist/mnist_with_summaries.py --log_dir=/train/log --learning_rate=0.1 --batch_size=150"\n  }, \n  "...": "..."\n}\n')),(0,p.kt)("p",null,"They can use two curly braces as placeholders, the template format will be as"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-json"},'"experimentSpec": {\n  "meta": {\n    "cmd": "python /var/tf_mnist/mnist_with_summaries.py --log_dir=/train/log --learning_rate={{learning_rate}} --batch_size=150"\n  }, \n  "...": "..."\n}\n')),(0,p.kt)("p",null,"The template parameters format will be as"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "learning_rate",\n  "value": 0.1,\n  "required": true,\n  "description": "This is learning_rate of training."\n}\n')),(0,p.kt)("p",null,"name: placeholder name\nvalue; default value\nrequired: Indicates whether the user must enter parameters, when required is true, value can be null\ndescription: Introduction of this parameter"),(0,p.kt)("p",null,"Users can use existing experiment templates and adjust the default value to create experiments.\nAfter the user submits the experiment template, the submarine server finds the corresponding template based on the name. And the template handler converts input parameters to an actual experiment, such as a distributed TF experiment."),(0,p.kt)("p",null,'The "replicas", "cpu", "memory" of resources will be automatically parameterized, so developers do not need to add them.\nFor example, if there are "Ps" and "Worker" under spec, the following parameters will be automatically appended.'),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"spec.Ps.replicas\nspec.Ps.resourceMap.cpu\nspec.Ps.resourceMap.memory\nspec.Worker.replicas\nspec.Worker.resourceMap.cpu\nspec.Worker.resourceMap.memory\n")),(0,p.kt)("h2",{id:"create-experiment-template"},"Create experiment template"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"POST /api/v1/template")),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Example Request")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-sh"},'curl -X POST -H "Content-Type: application/json" -d \'\n{\n  "name": "my-tf-mnist-template",\n  "author": "author",\n  "description": "This is a template to run tf-mnist",\n  "parameters": [{\n      "name": "learning_rate",\n      "value": 0.1,\n      "required": true,\n      "description": "This is learning_rate of training."\n    },\n    {\n      "name": "batch_size",\n      "value": 150,\n      "required": true,\n      "description": "This is batch_size of training."\n    },\n    {\n      "name": "experiment_name",\n      "value": "tf-mnist1",\n      "required": true,\n      "description": "the name of experiment."\n    }\n  ],\n  "experimentSpec": {\n    "meta": {\n      "cmd": "python /var/tf_mnist/mnist_with_summaries.py --log_dir=/train/log --learning_rate={{learning_rate}} --batch_size={{batch_size}}",\n      "name": "{{experiment_name}}",\n      "envVars": {\n        "ENV1": "ENV1"\n      },\n      "framework": "TensorFlow",\n      "namespace": "default"\n    },\n    "spec": {\n      "Ps": {\n        "replicas": 1,\n        "resources": "cpu=1,memory=1024M"\n      },\n      "Worker": {\n        "replicas": 1,\n        "resources": "cpu=1,memory=1024M"\n      }\n    },\n    "environment": {\n      "image": "apache/submarine:tf-mnist-with-summaries-1.0"\n    }\n  }\n}\n\' http://127.0.0.1:32080/api/v1/template\n')),(0,p.kt)("h3",{id:"list-experiment-template"},"List experiment template"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"GET /api/v1/template")),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Example Request:")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-sh"},"curl -X GET http://127.0.0.1:32080/api/v1/template\n")),(0,p.kt)("h3",{id:"get-experiment-template"},"Get experiment template"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"GET /api/v1/template/{name}")),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Example Request:")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-sh"},"curl -X GET http://127.0.0.1:32080/api/v1/template/my-tf-mnist-template\n")),(0,p.kt)("h3",{id:"patch-template"},"Patch template"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"PATCH /api/v1/template/{name}")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-sh"},'curl -X PATCH -H "Content-Type: application/json" -d \'\n{\n  "name": "my-tf-mnist-template",\n  "author": "author-new",\n  "description": "This is a template to run tf-mnist",\n  "parameters": [{\n      "name": "learning_rate",\n      "value": 0.1,\n      "required": true,\n      "description": "This is learning_rate of training."\n    },\n    {\n      "name": "batch_size",\n      "value": 150,\n      "required": true,\n      "description": "This is batch_size of training."\n    },\n    {\n      "name": "experiment_name",\n      "value": "tf-mnist1",\n      "required": true,\n      "description": "the name of experiment."\n    }\n  ],\n  "experimentSpec": {\n    "meta": {\n      "cmd": "python /var/tf_mnist/mnist_with_summaries.py --log_dir=/train/log --learning_rate={{learning_rate}} --batch_size={{batch_size}}",\n      "name": "{{experiment_name}}",\n      "envVars": {\n        "ENV1": "ENV1"\n      },\n      "framework": "TensorFlow",\n      "namespace": "default"\n    },\n    "spec": {\n      "Ps": {\n        "replicas": 1,\n        "resources": "cpu=1,memory=1024M"\n      },\n      "Worker": {\n        "replicas": 1,\n        "resources": "cpu=1,memory=1024M"\n      }\n    },\n    "environment": {\n      "image": "apache/submarine:tf-mnist-with-summaries-1.0"\n    }\n  }\n}\n\' http://127.0.0.1:32080/api/v1/template/my-tf-mnist-template\n')),(0,p.kt)("blockquote",null,(0,p.kt)("p",{parentName:"blockquote"},'"description", "parameters", "experimentSpec", "author" etc can be updated using this API.\n"name" of experiment template is not supported.')),(0,p.kt)("h3",{id:"delete-template"},"Delete template"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"GET /api/v1/template/{name}")),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Example Request:")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-sh"},"curl -X DELETE http://127.0.0.1:32080/api/v1/template/my-tf-mnist-template\n")),(0,p.kt)("h3",{id:"use-template-to-create-a-experiment"},"Use template to create a experiment"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"POST /api/v1/experiment/{template_name}")),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"Example Request:")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-sh"},'curl -X POST -H "Content-Type: application/json" -d \'\n{\n    "name": "tf-mnist",\n    "params": {\n        "learning_rate":"0.01",\n        "batch_size":"150",\n        "experiment_name":"newexperiment1"\n    }\n}\n\' http://127.0.0.1:32080/api/v1/experiment/my-tf-mnist-template\n')))}d.isMDXComponent=!0}}]);